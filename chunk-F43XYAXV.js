import{a as S}from"./chunk-YP2F4WY5.js";import{A as f,L as u,U as m,W as g,a as i,b as c,j as h,ka as a,s as p,ua as o}from"./chunk-MZEAFQHC.js";var l=class{get state(){return this.state$.getValue()}constructor(s){this.state$=new h(s)}select(s){return this.state$.asObservable().pipe(p(y=>s(y)),u())}setState(s){this.state$.next(i(i({},this.state),s))}};var d=(()=>{let s=class s{constructor(t){this.http=t}pullAlerts(){return this.http.get("http://localhost:3000/alerts",{headers:{}})}};s.\u0275fac=function(e){return new(e||s)(o(S))},s.\u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"});let r=s;return r})();var I={isFetching:!1,alerts:[]},O=(()=>{let s=class s extends l{constructor(t){super(I),this.alertsApi=t,this.alerts$=this.select(e=>e.alerts),this.isFetching$=this.select(e=>e.isFetching)}pullAlertsByMs(t){f(t).pipe(m(()=>this.alertsApi.pullAlerts()),g(()=>this.setState({isFetching:!0}))).subscribe(e=>{this.setState({alerts:[...this.state.alerts,j(e)]}),this.saveToLocalStorage(e),this.setState({isFetching:!1})})}sortBySeverity(){this.setState({alerts:[...this.state.alerts.sort((t,e)=>e.severity-t.severity)]})}sortBySource(){this.setState({alerts:[...this.state.alerts.sort((t,e)=>t.source<e.source?-1:t.source>e.source?1:0)]})}sortByDate(){this.setState({alerts:[...this.state.alerts.sort((t,e)=>new Date(e.date).getTime()-new Date(t.date).getTime())]})}onDismiss(t){let e=this.state.alerts.filter(n=>n.id!==t),v=this.state.alerts.filter(n=>n.id===t);this.setState({alerts:[...e,...v]})}fetchAlerts(){let t=localStorage.getItem("alerts");return t?JSON.parse(t):[]}saveToLocalStorage(t){let e=this.fetchAlerts();e.push(t),localStorage.setItem("alerts",JSON.stringify(e))}};s.\u0275fac=function(e){return new(e||s)(o(d))},s.\u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"});let r=s;return r})();function j(r){return c(i({},r),{isDismissed:!1})}export{O as a};
